steps:
- task: UseDotNet@2
  displayName: 'Use .Net Core sdk 3.1.x'
  inputs:
    version: 3.1.x

- task: DotNetCoreCLI@2
  displayName: 'Build'
  inputs:
    command: build
    publishWebProjects: false
    projects: 'Tests/TranscriptTestRunnerTests/TranscriptTestRunnerTests.csproj'
    arguments: '-v n --configuration $(BuildConfiguration)'

- task: DotNetCoreCLI@2
  displayName: 'DotNet Test'
  inputs:
    command: test
    projects: 'Tests/TranscriptTestRunnerTests/TranscriptTestRunnerTests.csproj'
    arguments: "-v n --configuration $(BuildConfiguration) --no-build --no-restore"

- powershell: |
   cd ..
   ls -R
  displayName: 'Dir workspace'
  continueOnError: true
  condition: succeededOrFailed()
